---
interface Props {
	title: string;
}
const { title } = Astro.props;
---

<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width,initial-scale=1,shrink-to-fit=no"
		/>
		<meta name="generator" content={Astro.generator} />
		<link
			rel="icon"
			type="image/svg+xml"
			href={import.meta.env.BASE_URL + "favicon.svg"}
		/>
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/simpledotcss@2.2.1/simple.min.css"
			integrity="sha256-/Utme3wDNP8grTDde+CI/KC1HhcynvqIk4Ql6UtRS6o="
			crossorigin="anonymous"
		/>
		<title>
			{`mdblank個人メモ${title !== undefined ? " | " + title : ""}`}
		</title>
	</head>
	<body>
		<main>
			<style>
				:global(p) {
					text-align: justify;
					text-indent: 0.8em;
				}
			</style>
			<slot />
		</main>
		<div
			id="quizbutton"
			style={{
				position: "fixed",
				height: "3rem",
				width: "3rem",
				borderRadius: "1.5rem",
				backgroundColor: "#3D5AFE",
				color: "#dcdcdc",
				bottom: "1.5rem",
				right: "1.5rem",
				display: "flex",
				justifyContent: "center",
				alignItems: "center",
				filter: "drop-shadow(.5ex .5ex 10px rgba(0,0,0,50%))",
				userSelect: "none",
				cursor: "pointer",
			}}
		>
			Q
		</div>
	</body>
	<script>
		// キーワード
		const keywords: NodeListOf<HTMLElement> =
			document.querySelectorAll("p strong");
		// 隠れたテキストをクリックして剥がす
		keywords.forEach((element) =>
			element.addEventListener("click", () => {
				const style = window.getComputedStyle(element);
				if (style.backgroundColor === style.color) {
					element.style.backgroundColor = "";
				}
			}),
		);
		const mainButton = document.getElementById(
			"quizbutton",
		) as HTMLDivElement;
		mainButton.addEventListener("click", () => {
			if (mainButton.innerText.includes("Q")) {
				// Enable QuizMode
				mainButton.innerText = "×";
				mainButton.style.backgroundColor = "#7986CB";
				keywords.forEach((element) => {
					const style = window.getComputedStyle(element);
					element.style.backgroundColor = style.color;
				});
				for (const bq of document.getElementsByTagName("blockquote")) {
					bq.style.visibility = "hidden";
				}
			} else {
				// Disable QuizMode
				mainButton.innerText = "Q";
				mainButton.style.backgroundColor = "#3D5AFE";
				keywords.forEach((element) => {
					element.style.backgroundColor = "";
				});
				for (const bq of document.getElementsByTagName("blockquote")) {
					bq.style.visibility = "";
				}
			}
		});
	</script>
</html>
